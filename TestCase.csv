Test Case ID,Requirement Ref,Test Type,Test Level,Title,Pre-condition,Test Case Description,Step No,Test Step Description,Post-condition,Input Data,Expected result,Remarks,Testing methods
QRY-001,Product listing queries,Functional,Unit Test,adds price and rating filters when provided,Jest runs module with mocks/fakes loaded.,Ensure price and rating filters are applied in the aggregation pipeline.,1,Ensure price and rating filters are applied in the aggregation pipeline.,Assertions in the test verify the outcome.,"getStoreProductsQuery(min=100, max=500, rating=4)",Match stage keeps isActive true with price 100-500 and averageRating >=4.,Automated,Jest
QRY-002,Product listing queries,Functional,Unit Test,defaults to only active products when filters missing,Jest runs module with mocks/fakes loaded.,Pipeline should default to active products when no filters are supplied.,1,Pipeline should default to active products when no filters are supplied.,Assertions in the test verify the outcome.,getStoreProductsQuery(),Match stage only contains isActive: true.,Automated,Jest
QRY-003,Product listing queries,Functional,Unit Test,builds lookup pipeline that filters by user wishlist,Jest runs module with mocks/fakes loaded.,Wishlist pipeline should attach isLiked for the supplied user.,1,Wishlist pipeline should attach isLiked for the supplied user.,Assertions in the test verify the outcome.,getStoreProductsWishListQuery(userId='user-123'),Lookup uses ObjectId(user-123) and addFields exposes isLiked flag.,Automated,Jest
QRY-004,Product listing queries,Regression,Unit Test,matches snapshot for standard filters,Jest runs module with mocks/fakes loaded.,Guard pipeline shape for typical price and rating filters.,1,"Compare snapshot for getStoreProductsQuery(50, 200, 4.5)",Assertions in the test verify the outcome.,"getStoreProductsQuery(min=50, max=200, rating=4.5)",Pipeline matches stored Jest snapshot.,Snapshot guard,Jest
QRY-005,Product listing queries,Edge,Unit Test,rating 0 and min > max do not crash,Jest runs module with mocks/fakes loaded.,Handle inverted price bounds without averageRating filter.,1,Handle inverted price bounds without averageRating filter.,Assertions in the test verify the outcome.,"getStoreProductsQuery(min=200, max=50, rating=0)",Pipeline retains price bounds and omits averageRating without throwing.,Automated,Jest
QRY-006,Product listing queries,Regression,Unit Test,wishlist pipeline snapshot,Jest runs module with mocks/fakes loaded.,Ensure wishlist lookup pipeline stays stable for user ids.,1,Compare snapshot for getStoreProductsWishListQuery('abc123'),Assertions in the test verify the outcome.,getStoreProductsWishListQuery(userId='abc123'),Pipeline matches stored Jest snapshot.,Snapshot guard,Jest
QRY-007,Product listing queries,Negative,Unit Test,throws when ObjectId fails (invalid input),Jest runs module with mocks/fakes loaded.,Surface errors when ObjectId construction fails for wishlist pipeline.,1,Surface errors when ObjectId construction fails for wishlist pipeline.,Assertions in the test verify the outcome.,getStoreProductsWishListQuery(userId='bad') with ObjectId mocked to throw,Error is raised for invalid object id input.,Automated,Jest
SRCH-001,Product search route,Functional,Integration Test,returns products when matches are found,Express app bootstrapped in Jest with mocked dependencies.,Search endpoint should return matching products.,1,Request /api/product/list/search/camera with seeded match,Assertions in the test verify the outcome.,GET /api/product/list/search/camera,HTTP 200 with a products array containing matches.,Automated,Jest + Supertest
SRCH-002,Product search route,Negative,Integration Test,returns 404 when nothing matches,Express app bootstrapped in Jest with mocked dependencies.,Search endpoint returns not found when no product matches query.,1,Request /api/product/list/search/unknown with empty result,Assertions in the test verify the outcome.,GET /api/product/list/search/unknown,HTTP 404 with 'No product found' message.,Automated,Jest + Supertest
SRCH-003,Product search route,Negative,Integration Test,returns 400 when find throws error,Express app bootstrapped in Jest with mocked dependencies.,Search endpoint surfaces a 400 when the database find rejects.,1,Force Product.find to reject then request /api/product/list/search/fail,Assertions in the test verify the outcome.,GET /api/product/list/search/fail,HTTP 400 with processing error body.,Automated,Jest + Supertest
PROD-001,Product routes,Functional,Integration Test,GET /api/product/item/:slug returns payload when product and brand active,Express app bootstrapped in Jest with mocked dependencies.,Product detail should return when brand is active and image is ensured.,1,Product detail should return when brand is active and image is ensured.,Assertions in the test verify the outcome.,GET /api/product/item/camera-01,HTTP 200 with product payload and imageUrl populated.,Automated,Jest + Supertest
PROD-002,Product routes,Negative,Integration Test,GET /api/product/item/:slug returns 404 when product brand inactive,Express app bootstrapped in Jest with mocked dependencies.,Inactive brand should make the product unreachable.,1,Inactive brand should make the product unreachable.,Assertions in the test verify the outcome.,GET /api/product/item/camera-old,HTTP 404 with 'No product found' message.,Automated,Jest + Supertest
PROD-003,Product routes,Functional,Integration Test,"GET /api/product/list applies filters, wishlist, and pagination",Express app bootstrapped in Jest with mocked dependencies.,"List endpoint applies category/brand filters, wishlist lookup, sort and paging.",1,"List endpoint applies category/brand filters, wishlist lookup, sort and paging.",Assertions in the test verify the outcome.,GET /api/product/list?category=camera&brand=best-brand&min=10&max=500&page=1&limit=2,"HTTP 200 with count=2, totalPages>=1, wishlist and images applied.",Automated,Jest + Supertest
PROD-004,Product routes,Functional,Integration Test,GET /api/product/featured returns featured list for guest user,Express app bootstrapped in Jest with mocked dependencies.,Featured endpoint should return featured products with images.,1,Featured endpoint should return featured products with images.,Assertions in the test verify the outcome.,GET /api/product/featured?limit=3,HTTP 200 with featured products list and imageUrl applied.,Automated,Jest + Supertest
PROD-005,Product routes,Functional,Integration Test,GET /api/product/popular respects rating/min/max filters,Express app bootstrapped in Jest with mocked dependencies.,Popular endpoint should sort by popularity and respect rating/min/max filters.,1,Popular endpoint should sort by popularity and respect rating/min/max filters.,Assertions in the test verify the outcome.,GET /api/product/popular?limit=1&rating=4&min=10&max=100,HTTP 200 with limited list sorted by popularity and filters applied.,Automated,Jest + Supertest
PROD-006,Product routes,Functional,Integration Test,GET /api/product/list/select returns minimal product names under auth guard,Express app bootstrapped in Jest with mocked dependencies.,Select endpoint returns minimal product names for authenticated user.,1,Select endpoint returns minimal product names for authenticated user.,Assertions in the test verify the outcome.,GET /api/product/list/select,HTTP 200 with array of product name records.,Automated,Jest + Supertest
CART-PERM-001,Cart permissions,Negative,Unit Test,rejects when user is missing,Jest runs module with mocks/fakes loaded.,ensurePurchaser should block unauthenticated access.,1,ensurePurchaser should block unauthenticated access.,Assertions in the test verify the outcome.,user=None,allowed false with 401 Authentication required error.,Automated,Jest
CART-PERM-002,Cart permissions,Negative,Unit Test,rejects admin accounts,Jest runs module with mocks/fakes loaded.,ensurePurchaser should block admin roles.,1,ensurePurchaser should block admin roles.,Assertions in the test verify the outcome.,user.role=Admin,allowed false with 403 Store management accounts error.,Automated,Jest
CART-PERM-003,Cart permissions,Functional,Unit Test,allows member shopper,Jest runs module with mocks/fakes loaded.,ensurePurchaser should allow member role shoppers.,1,ensurePurchaser should allow member role shoppers.,Assertions in the test verify the outcome.,user.role=Member,allowed true with no error response.,Automated,Jest
CART-PERM-004,Cart permissions,Edge,Unit Test,treats empty user object as unauthorized (missing auth),Jest runs module with mocks/fakes loaded.,Documents current behavior when user object is empty.,1,Documents current behavior when user object is empty.,Assertions in the test verify the outcome.,user={} (no role),allowed true (current behavior accepts empty object).,Documents current behavior; follow-up may be needed,Jest
CART-PERM-005,Cart permissions,Edge,Unit Test,returns allowed for users with random roles (non admin),Jest runs module with mocks/fakes loaded.,Non-admin arbitrary roles are treated as allowed.,1,Non-admin arbitrary roles are treated as allowed.,Assertions in the test verify the outcome.,user.role=ROLE_GUEST,allowed true because only admin is blocked.,Automated,Jest
CART-PERM-006,Cart permissions,Negative,Unit Test,rejects when user.role is undefined but user falsy,Jest runs module with mocks/fakes loaded.,Undefined user input should be rejected.,1,Undefined user input should be rejected.,Assertions in the test verify the outcome.,user undefined,allowed false with 401 status in response payload.,Automated,Jest
CART-PERM-007,Cart permissions,Negative,Unit Test,rejects explicit admin account,Jest runs module with mocks/fakes loaded.,Admin users are blocked from cart operations.,1,Admin users are blocked from cart operations.,Assertions in the test verify the outcome.,user.role=Admin,allowed false with 403 status in response payload.,Automated,Jest
CART-API-001,Cart routes,Negative,Integration Test,rejects unauthenticated requests,Express app bootstrapped in Jest with mocked dependencies.,Cart add endpoint should reject missing auth.,1,Cart add endpoint should reject missing auth.,Assertions in the test verify the outcome.,POST /api/cart/add with no token,HTTP 401 with Authentication required error.,Automated,Jest + Supertest
CART-API-002,Cart routes,Negative,Integration Test,rejects admin users creating carts,Express app bootstrapped in Jest with mocked dependencies.,Cart add should block admin role accounts.,1,Cart add should block admin role accounts.,Assertions in the test verify the outcome.,POST /api/cart/add as admin,HTTP 403 with Store management accounts message.,Automated,Jest + Supertest
CART-API-003,Cart routes,Functional,Integration Test,creates cart for member user,Express app bootstrapped in Jest with mocked dependencies.,Cart add should create a cart for member with taxes applied and bulk stock update.,1,Cart add should create a cart for member with taxes applied and bulk stock update.,Assertions in the test verify the outcome.,POST /api/cart/add with valid products payload,"HTTP 200 with success true, cartId returned, stock bulkWrite invoked.",Automated,Jest + Supertest
CART-API-004,Cart routes,Functional,Integration Test,allows member to add product to existing cart,Express app bootstrapped in Jest with mocked dependencies.,Members can append products to an existing cart.,1,Members can append products to an existing cart.,Assertions in the test verify the outcome.,POST /api/cart/add/{cartId} with product payload,HTTP 200 and Cart.updateOne called with $push.,Automated,Jest + Supertest
CART-API-005,Cart routes,Functional,Integration Test,allows member to delete entire cart,Express app bootstrapped in Jest with mocked dependencies.,Members can delete a cart they own.,1,Members can delete a cart they own.,Assertions in the test verify the outcome.,DELETE /api/cart/delete/{cartId},HTTP 200 and Cart.deleteOne called for the id.,Automated,Jest + Supertest
CART-API-006,Cart routes,Functional,Integration Test,allows member to delete specific product from cart,Express app bootstrapped in Jest with mocked dependencies.,Members can remove a product line from a cart.,1,Members can remove a product line from a cart.,Assertions in the test verify the outcome.,DELETE /api/cart/delete/{cartId}/{productId},HTTP 200 and Cart.updateOne called with $pull for product.,Automated,Jest + Supertest
AUTH-MW-001,Role middleware,Negative,Unit Test,returns 401 when user missing,Jest runs module with mocks/fakes loaded.,Role check should block missing users.,1,Role check should block missing users.,Assertions in the test verify the outcome.,role.check(Admin) with req.user=null,Responds 401 Unauthorized and does not call next().,Automated,Jest
AUTH-MW-002,Role middleware,Negative,Unit Test,returns 403 when role mismatch,Jest runs module with mocks/fakes loaded.,Role check should block non-matching roles.,1,Role check should block non-matching roles.,Assertions in the test verify the outcome.,role.check(Admin) with req.user.role=Member,Responds 403 not allowed and stops middleware chain.,Automated,Jest
AUTH-MW-003,Role middleware,Functional,Unit Test,passes through when role is allowed,Jest runs module with mocks/fakes loaded.,Role check allows matching roles.,1,Role check allows matching roles.,Assertions in the test verify the outcome.,role.check(Admin) with req.user.role=Admin,Calls next() without setting error status.,Automated,Jest
AUTH-MW-004,Role middleware,Negative,Unit Test,handles undefined role on user object,Jest runs module with mocks/fakes loaded.,Undefined roles should be treated as forbidden.,1,Undefined roles should be treated as forbidden.,Assertions in the test verify the outcome.,role.check(Admin) with req.user.role undefined,Responds 403 not allowed and blocks next().,Automated,Jest
AUTH-MW-005,Role middleware,Functional,Unit Test,allows custom role when included in allowed list,Jest runs module with mocks/fakes loaded.,Custom allowed roles should pass through.,1,Custom allowed roles should pass through.,Assertions in the test verify the outcome.,role.check('ROLE_CUSTOM') with req.user.role=ROLE_CUSTOM,Calls next() successfully.,Automated,Jest
AUTH-ACC-001,Role access guard,Negative,Integration Test,rejects when user missing,Express app bootstrapped in Jest with mocked dependencies.,Route guarded by role middleware should block missing user.,1,Route guarded by role middleware should block missing user.,Assertions in the test verify the outcome.,GET /admin-only with no user injected,HTTP 401 Unauthorized returned.,Automated,Jest + Supertest
AUTH-ACC-002,Role access guard,Negative,Integration Test,rejects when role is not admin,Express app bootstrapped in Jest with mocked dependencies.,Member role should not access admin-only route.,1,Member role should not access admin-only route.,Assertions in the test verify the outcome.,GET /admin-only as Member,HTTP 403 not allowed returned.,Automated,Jest + Supertest
AUTH-ACC-003,Role access guard,Functional,Integration Test,allows admin user,Express app bootstrapped in Jest with mocked dependencies.,Admin role should access admin-only route.,1,Admin role should access admin-only route.,Assertions in the test verify the outcome.,GET /admin-only as Admin,HTTP 200 with success true.,Automated,Jest + Supertest
STORE-001,Store utils,Functional,Unit Test,calculates sales tax per cart item,Jest runs module with mocks/fakes loaded.,"Cart item totals should include price, tax, and priceWithTax.",1,"Cart item totals should include price, tax, and priceWithTax.",Assertions in the test verify the outcome.,items with taxable and non-taxable prices,Returns totals per item with correct tax and priceWithTax fields.,Automated,Jest
STORE-002,Store utils,Functional,Unit Test,calculates order total excluding cancelled items,Jest runs module with mocks/fakes loaded.,Cancelled items should not contribute to totals.,1,Cancelled items should not contribute to totals.,Assertions in the test verify the outcome.,order.products include Processing/Cancelled/Delivered,"Total equals sum of non-cancelled items only (e.g., 120).",Automated,Jest
STORE-003,Store utils,Functional,Unit Test,calculates order tax amount & updates totals,Jest runs module with mocks/fakes loaded.,Order totals and item priceWithTax should be updated with tax amounts.,1,Order totals and item priceWithTax should be updated with tax amounts.,Assertions in the test verify the outcome.,order with taxable and cancelled items,"Returns total=100, totalTax?5, totalWithTax?105 and priceWithTax updated.",Automated,Jest
STORE-004,Store utils,Functional,Unit Test,formatOrders normalizes cart data and totals,Jest runs module with mocks/fakes loaded.,formatOrders should copy cart id and compute totals with tax.,1,formatOrders should copy cart id and compute totals with tax.,Assertions in the test verify the outcome.,orders list containing cart and products,Returns formatted order with cartId and priceWithTax > total.,Automated,Jest
STORE-005,Store utils,Functional,Unit Test,caculateTaxAmount keeps totals zero when all items cancelled,Jest runs module with mocks/fakes loaded.,Cancelled-only orders should zero out totals but keep priceWithTax fallback.,1,Cancelled-only orders should zero out totals but keep priceWithTax fallback.,Assertions in the test verify the outcome.,order with all products status Cancelled,total and totalWithTax become 0; cancelled item priceWithTax equals price.,Automated,Jest
STORE-006,Store utils,Edge,Unit Test,handles zero and negative price/quantity gracefully,Jest runs module with mocks/fakes loaded.,Sales tax calculation should not produce NaN for edge prices/quantities.,1,Sales tax calculation should not produce NaN for edge prices/quantities.,Assertions in the test verify the outcome.,items with zero/negative price or quantity,"Outputs finite totalPrice, totalTax, and priceWithTax for each item.",Automated,Jest
STORE-007,Store utils,Edge,Unit Test,caculateTaxAmount tolerates product missing fields,Jest runs module with mocks/fakes loaded.,Tax calculation should not crash when product fields are missing.,1,Tax calculation should not crash when product fields are missing.,Assertions in the test verify the outcome.,order with null/empty product objects,total and totalWithTax remain 0 without throwing errors.,Automated,Jest
STORE-008,Store utils,Edge,Unit Test,formatOrders works even if cart or products missing,Jest runs module with mocks/fakes loaded.,Formatter should handle null cart and empty products array.,1,Formatter should handle null cart and empty products array.,Assertions in the test verify the outcome.,orders with missing cart or empty products,Returns formatted entries without throwing and preserves ids.,Automated,Jest
STORE-009,Store utils,Edge,Unit Test,caculateTaxAmount does not throw when taxable flag is undefined,Jest runs module with mocks/fakes loaded.,Missing taxable flag should not break tax calculation.,1,Missing taxable flag should not break tax calculation.,Assertions in the test verify the outcome.,order item with taxable flag omitted,Function completes without exception.,Automated,Jest
STORE-010,Store utils,Edge,Unit Test,fuzz random inputs to avoid NaN results,Jest runs module with mocks/fakes loaded.,Randomized price/quantity inputs should always produce finite numbers.,1,Randomized price/quantity inputs should always produce finite numbers.,Assertions in the test verify the outcome.,100 random items with varied price/quantity,All totalPrice/totalTax/priceWithTax values remain finite.,Automated,Jest
ORDER-API-001,Order routes,Negative,Integration Test,rejects unauthenticated requests,Express app bootstrapped in Jest with mocked dependencies.,Order creation should require authentication.,1,Order creation should require authentication.,Assertions in the test verify the outcome.,POST /api/order/add without token,HTTP 401 with Authentication required error.,Automated,Jest + Supertest
ORDER-API-002,Order routes,Negative,Integration Test,rejects admin users placing orders,Express app bootstrapped in Jest with mocked dependencies.,Admin accounts cannot place customer orders.,1,Admin accounts cannot place customer orders.,Assertions in the test verify the outcome.,POST /api/order/add as admin,HTTP 403 with Store management accounts message.,Automated,Jest + Supertest
ORDER-API-003,Order routes,Negative,Integration Test,fails when cartId missing,Express app bootstrapped in Jest with mocked dependencies.,Cart reference is mandatory for order creation.,1,Cart reference is mandatory for order creation.,Assertions in the test verify the outcome.,POST /api/order/add without cartId,HTTP 400 with Missing cart reference error.,Automated,Jest + Supertest
ORDER-API-004,Order routes,Negative,Integration Test,fails when shipping info incomplete,Express app bootstrapped in Jest with mocked dependencies.,Order creation should validate complete shipping fields.,1,Order creation should validate complete shipping fields.,Assertions in the test verify the outcome.,POST /api/order/add missing address fields,HTTP 400 with complete shipping information error.,Automated,Jest + Supertest
ORDER-API-005,Order routes,Functional,Integration Test,creates order successfully for member user,Express app bootstrapped in Jest with mocked dependencies.,Member with valid cart and shipping creates order and triggers email.,1,Member with valid cart and shipping creates order and triggers email.,Assertions in the test verify the outcome.,"POST /api/order/add with cartId, total, COD, shipping payload",HTTP 200 success true; order saved; cart fetched; email sent.,Automated,Jest + Supertest
ORDER-API-006,Order routes,Negative,Integration Test,GET /api/order/search returns [] when search id invalid,Express app bootstrapped in Jest with mocked dependencies.,Search endpoint should return empty list when id is invalid.,1,Search endpoint should return empty list when id is invalid.,Assertions in the test verify the outcome.,GET /api/order/search?search=bad-id,HTTP 200 with empty orders array and no DB query executed.,Automated,Jest + Supertest
ORDER-API-007,Order routes,Functional,Integration Test,GET /api/order/search returns sanitized orders for admin,Express app bootstrapped in Jest with mocked dependencies.,Admin search returns sanitized order totals with tax applied.,1,Admin search returns sanitized order totals with tax applied.,Assertions in the test verify the outcome.,GET /api/order/search?search=665544332211 as Admin,"HTTP 200 with formatted order, total rounded and tax calculated.",Automated,Jest + Supertest
ORDER-API-008,Order routes,Functional,Integration Test,GET /api/order/me paginates and formats results,Express app bootstrapped in Jest with mocked dependencies.,Order history for member is paginated and formatted.,1,Order history for member is paginated and formatted.,Assertions in the test verify the outcome.,GET /api/order/me?page=2&limit=1,HTTP 200 with totalPages/count and formatted orders list.,Automated,Jest + Supertest
ORDER-API-009,Order routes,Functional,Integration Test,GET /api/order/:orderId returns normalized response for member,Express app bootstrapped in Jest with mocked dependencies.,Order detail response should include cartId and tax calculations.,1,Order detail response should include cartId and tax calculations.,Assertions in the test verify the outcome.,GET /api/order/order-3,HTTP 200 with normalized order payload and cartId present.,Automated,Jest + Supertest
ORDER-API-010,Order routes,Functional,Integration Test,PUT /api/order/complete/:orderId marks delivered items as completed,Express app bootstrapped in Jest with mocked dependencies.,Completing an order marks delivered cart items completed and saves cart.,1,Completing an order marks delivered cart items completed and saves cart.,Assertions in the test verify the outcome.,PUT /api/order/complete/order-9,HTTP 200 with completion message; cart marked modified and saved.,Automated,Jest + Supertest
ORDER-API-011,Order routes,Functional,Integration Test,PUT /api/order/status/item/:itemId cancels entire order when all items cancelled,Express app bootstrapped in Jest with mocked dependencies.,Cancelling the last item should remove order and cart and update inventory.,1,Cancelling the last item should remove order and cart and update inventory.,Assertions in the test verify the outcome.,PUT /api/order/status/item/item-1 with status=Cancelled,HTTP 200 with orderCancelled true and Order/Cart delete invoked.,Automated,Jest + Supertest
